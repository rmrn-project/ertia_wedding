<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan - Sandi & Ertia</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lora:wght@300;400&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            min-height: 100vh;
            background: #3c2f2f;
            font-family: 'Lora', serif;
            color: #fff;
            overflow-x: hidden;
        }
        .overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            z-index: 1;
            display: none !important;
        }
        .container {
            position: relative;
            z-index: 2;
            padding: 60px 20px 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        /* SCROLL FADE IN */
        .fade {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1s ease-out;
        }
        .fade.show { opacity: 1; transform: translateY(0); }





.couple-photo {  
width: 280px;  
height: auto; /* portrait */  
border-radius: 20px; /* jangan pakai % atau 50% */  
object-fit: cover;  
margin-bottom: 40px;  
display: block;  
position: relative;  
z-index: 2;

}

.photo-wrapper {
position: relative;
display: inline-block;
padding: 12px; /* spasi buat border love */
border-radius: 20px;
background: linear-gradient(45deg, #d4af37, #f4e4bc, #d4af37, #b8973a);
background-size: 400% 400%;
animation: gradient 8s ease infinite;
box-shadow:
0 0 30px rgba(212, 175, 55, 0.6),
0 0 60px rgba(212, 175, 55, 0.3),
0 20px 50px rgba(0,0,0,0.7);
}

/* Love floating */
.photo-wrapper::before,
.photo-wrapper::after {
content: "‚ù§";
position: absolute;
font-size: 22px;
opacity: 0.7;
color: #ff6b81;
animation: floatLove 2.5s infinite ease-in-out;
}

/* Love kiri */
.photo-wrapper::before { left: -20px; top: 30%; }
/* Love kanan */
.photo-wrapper::after { right: -20px; top: 60%; }

@keyframes floatLove {
0% { transform: translateY(0); opacity: 0.6; }
50% { transform: translateY(-10px); opacity: 1; }
100% { transform: translateY(0); opacity: 0.6; }
}


.couple-initials {
    margin-top: 12px;
    font-family: 'Great Vibes', cursive;
    font-size: 2em;
    color: white;
    font-weight: 700;
    letter-spacing: 4px;
}




        .details-acara {
    text-align: center;
    margin: 40px auto;
    max-width: 500px; /* sesuai rasio gambar */
}

.details-acara img {
    width: 100%;
    max-width: 500px; /* portrait 500x750 px */
    height: auto;
    display: block;
    margin: 0 auto;
    border-radius: 12px; /* opsional, biar sudut sedikit membulat */
    box-shadow: 0 10px 30px rgba(0,0,0,0.3); /* opsional, biar terlihat lebih mewah */
}





.details {
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(15px);
            padding: 38px 30px;
            border-radius: 20px;
            width: 92%;
            max-width: 520px;
            margin: 50px auto;
            border: 1px solid rgba(255,255,255,0.18);
        }
        .details h3 {
            font-family: 'Playfair Display', serif;
            color: #d4af37;
            font-size: 1.9em;
            margin-bottom: 20px;
        }




        /* SLIDER FOTO 1:1 - GOLD SHADOW PREMIUM */
.gallery {
    width: 90%;
    max-width: 400px;
    margin: 70px auto;
    overflow: hidden;
    border-radius: 30px;

    /* Shadow hitam + gold glow */
    box-shadow:
        0 15px 40px rgba(0,0,0,0.6),
        0 0 20px rgba(212,175,55,0.6),
        0 0 40px rgba(212,175,55,0.4),
        0 0 70px rgba(212,175,55,0.2);

    /* Motion glow gold lembut */
    animation: goldPulse 6s infinite ease-in-out;
}

/* Efek glowing bernafas */
@keyframes goldPulse {
    0% {
        box-shadow:
            0 15px 40px rgba(0,0,0,0.6),
            0 0 18px rgba(212,175,55,0.5),
            0 0 35px rgba(212,175,55,0.3),
            0 0 60px rgba(212,175,55,0.15);
    }
    50% {
        box-shadow:
            0 15px 40px rgba(0,0,0,0.6),
            0 0 25px rgba(212,175,55,0.7),
            0 0 55px rgba(212,175,55,0.45),
            0 0 90px rgba(212,175,55,0.25);
    }
    100% {
        box-shadow:
            0 15px 40px rgba(0,0,0,0.6),
            0 0 18px rgba(212,175,55,0.5),
            0 0 35px rgba(212,175,55,0.3),
            0 0 60px rgba(212,175,55,0.15);
    }
}

/* SLIDER FOTO 1:1 - TANPA TOMBOL PANAH */
.slides {
    display: flex;
    width: 500%; /* 5 foto */
    animation: slide 20s infinite;
    transition: transform 0.5s ease;
}
.slides img {
    width: 20%;
    height: auto;
    aspect-ratio: 1/1;
    object-fit: cover;
    flex-shrink: 0;
}

/* ANIMASI SLIDER */
@keyframes slide {
    0%, 16%   { transform: translateX(0%); }
    20%, 36%  { transform: translateX(-20%); }
    40%, 56%  { transform: translateX(-40%); }
    60%, 76%  { transform: translateX(-60%); }
    80%, 96%  { transform: translateX(-80%); }
    100%      { transform: translateX(0%); }
}






        /* TOMBOL SALIN KECIL */
        .norek { font-size: 1.8em; font-weight: bold; letter-spacing: 2px; margin: 15px 0; }
        .btn-salin {
            padding: 8px 18px; background: transparent; color: #d4af37;
            border: 1.5px solid #d4af37; border-radius: 30px; font-size: 0.9em;
            cursor: pointer; transition: 0.3s;
        }
        .btn-salin:hover { background: #d4af37; color: #000; }
        .notif { margin-top: 10px; color: #90ee90; font-size: 0.95em; display: none; }

        /* FORM UCAPAN */
        input, textarea {
            width: 100%; padding: 16px; margin: 12px 0; border-radius: 12px;
            border: none; background: rgba(255,255,255,0.95); color: #333; font-size: 1.05em;
        }
        textarea { height: 110px; resize: none; }
        .btn-kirim {
            padding: 14px 36px; background: #d4af37; color: #000;
            border: none; border-radius: 50px; font-weight: bold; cursor: pointer;
        }
        .ucapan-item {
            background: rgba(255,255,255,0.15); padding: 18px; border-radius: 15px;
            margin-top: 18px; text-align: left;
        }

        #musicBtn {
            position: fixed; bottom: 30px; right: 25px;
            width: 60px; height: 60px; background: rgba(255,255,255,0.2);
            backdrop-filter: blur(15px); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            z-index: 9999; cursor: grab;
user-select: none; touch-action: none;
        }

        @media (max-width:480px) {
            .couple-photo { width: 220px; height: 220px; }
            .gallery { max-width: 340px; }
        }
    </style>
</head>
<body>
<div class="overlay"></div>
<div class="container">

   <div class="photo-wrapper">
    <img src="gambar_2.jpg" alt="Sandi & Ertia" class="couple-photo fade">
    <div class="couple-initials">S & E</div>
</div>

    <!-- HEADER MEWAH -->
    <div class="header-section fade" style="margin:60px 0 80px;">
        <div style="font-size:1.4em; color:#d4af37; opacity:0.7; letter-spacing:8px; margin-bottom:20px;">
            ‚ãÜ Àñ‚Å∫‚Äß‚Çä ‚òΩ ‚óØ ‚òæ ‚Çä‚Äß‚Å∫Àñ ‚ãÜ
        </div>
        <h1 style="font-family:'Playfair Display',serif; font-size:3.2em; color:#d4af37; margin:0 0 20px; letter-spacing:2px;">
            Dengan Izin Allah
        </h1>
        <p style="font-size:1.35em; color:#f0e6d2; font-style:italic; max-width:90%; margin:0 auto; line-height:1.7;">
            "Kami menikah ‚Äî<br>satu cerita, dua hati, satu tujuan"
        </p>
        <div style="margin-top:30px; color:#d4af37; opacity:0.5; font-size:1.1em;">
            ‚úª ‚îà‚îà‚îà‚îà ‚úª ‚îà‚îà‚îà‚îà ‚úª
        </div>
    </div>




<!-- MEMPELAI DENGAN & BESAR -->
<div class="couple-names fade" style="margin: 70px 0; width: 100%; max-width: 560px;">
    <div style="margin-bottom: 30px;">
        <h2 style="
            font-family:'Great Vibes', cursive; 
            font-size:2.6em; 
            background: linear-gradient(45deg, #f4e4bc, #d4af37, #b8973a); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 10px rgba(212,175,55,0.4);
            letter-spacing: 1px;
            margin:0;
        ">Sandi Maulana S.Pd</h2>
        <p style="font-size:1.1em; color:#e8e0d0; margin:12px 0 0; line-height:1.6;">
            Putra bungsu dari<br>Bapak Udis Subandi & Ibu Dede Jualiah
        </p>
    </div>
    <div style="position:relative; margin:40px 0; font-size:4.5em; color:#d4af37; font-family:'Playfair Display',serif;">
        &
        <span style="position:absolute; top:-25px; left:50%; transform:translateX(-50%); font-size:0.35em; color:#d4af37; opacity:0.6;">‚úª ‚úª ‚úª</span>
        <span style="position:absolute; bottom:-25px; left:50%; transform:translateX(-50%); font-size:0.35em; color:#d4af37; opacity:0.6;">‚úª ‚úª ‚úª</span>
    </div>
    <div style="margin-top: 30px;">
        <h2 style="
            font-family:'Great Vibes', cursive; 
            font-size:2.6em; 
            background: linear-gradient(45deg, #f4e4bc, #d4af37, #b8973a); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 6px rgba(0,0,0,0.3), 0 0 10px rgba(212,175,55,0.4);
            letter-spacing: 1px;
            margin:0;
        ">Ertia Agustina S.Kom</h2>
        <p style="font-size:1.1em; color:#e8e0d0; margin:12px 0 0; line-height:1.6;">
            Putri Tunggal dari<br>Bapak Gustana & Alm. Ibu Ernawati
        </p>
    </div>
</div>




    <!-- SLIDER FOTO 1:1 -->
    <div class="gallery fade">
        <div class="slides">
            <img src="foto1.jpg" alt="Foto 1">
            <img src="foto2.jpg" alt="Foto 2">
            <img src="foto3.jpg" alt="Foto 3">
            <img src="foto4.jpg" alt="Foto 4">
            <img src="foto5.jpg" alt="Foto 5">
        </div>
    </div>






    <!-- ACARA -->
<div class="details-acara fade">
    <img src="acara.png" alt="Acara Pernikahan">
</div>




    <!-- LOKASI -->
    <div class="details fade">
        <h3>Lokasi Acara</h3>
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3958.123456789!2d106.933333!3d-6.917222!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e68377ff30ddc8f%3A0x633c7404f5213063!2sPabrik%20Kerupuk%20Do'a%20Ibu!5e0!3m2!1sid!2sid!4v1699999999999" width="100%" height="260" style="border:0;border-radius:15px;margin:15px 0;" allowfullscreen="" loading="lazy"></iframe>
        <a href="https://share.google/oLH85yXLvunhHbqrn" target="_blank" style="display:inline-block;padding:14px 30px;background:#d4af37;color:#000;border-radius:50px;text-decoration:none;font-weight:bold;">Buka di Google Maps</a>
    </div>





   <!-- AMPLOP DIGITAL -->
<div class="details fade">
    <h3>Amplop Digital</h3>

    <div style="margin-bottom:20px;">
        <p style="line-height:1.8; margin:0;">
            Bank BCA<br>
            <div class="norek" id="norek1">1234567890</div>
            a.n Sandi Maulana
        </p>
        <button class="btn-salin" onclick="copyRek('norek1')">Salin Nomor</button>
        <p class="notif" id="notif1">Disalin!</p>
    </div>

    <div style="margin-bottom:20px;">
        <p style="line-height:1.8; margin:0;">
            Bank BRI<br>
            <div class="norek" id="norek2">441101035072538</div>
            a.n Gustana
        </p>
        <button class="btn-salin" onclick="copyRek('norek2')">Salin Nomor</button>
        <p class="notif" id="notif2">Disalin!</p>
    </div>
</div>




    <!-- ===========================================
   DOA & UCAPAN DENGAN FOTO OPSIONAL
=========================================== -->



<div class="details fade">
    <h3>Doa & Ucapan</h3>

    <!-- Upload foto opsional -->
    <label for="foto" style="display:block;margin-bottom:10px;font-weight:bold;">
        Foto Profil (opsional, max 5MB):
    </label>
    <input type="file" id="foto" accept="image/*" style="margin-bottom:15px;display:block;">

    <!-- Nama -->
    <input type="text" id="nama" placeholder="Nama kamu" 
           style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc;">

    <!-- Doa / ucapan -->
    <textarea id="doa" placeholder="Tulis doa & ucapan terbaik..." 
              style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc;resize:none;"></textarea>

    <!-- Tombol kirim ‚Äì CUMA DITAMBAH ID (style TETAP SAMA PERSIS) -->

<button class="btn-kirim" id="kirimUcapan"
        style="display:inline-block;padding:12px 25px;background:#d4af37;color:#000;border-radius:50px;font-weight:bold;border:none;cursor:pointer;">
    Kirim Ucapan
</button>



    <!-- List ucapan -->
    <div id="listUcapan" style="margin-top:20px;"></div>
</div>






<!-- Penutup / ucapan terima kasih -->
<div class="fade" style="margin-top:60px;text-align:center;">
    <p>Terima kasih atas doa restu dan kehadirannya</p>
    <p style="margin:20px 0;">Dengan cinta,</p>
    <p style="font-size:1.5em;"><strong>Sandi & Ertia</strong></p>
</div>



<!-- Elegant Font -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">

<footer id="rmrnFooter" 
style="position: relative; padding:14px 0; text-align:center; font-family:'Playfair Display', serif; font-size:14px; color:#D4AF37; border-top:1px solid rgba(212,175,55,0.4); margin-top:40px; z-index: 999999;">
  ¬© <span id="year"></span> Dibuat oleh ‚Äî 
  <a href="https://wa.me/6289652201298" target="_blank" rel="noopener noreferrer"
     style="text-decoration:none; color:#D4AF37; font-weight:600;">
    rmrn-project
  </a>
</footer>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();
</script>







<!-- MUSIK - PASTI GANTI DARI PLAY KE PAUSE -->
<audio id="bgm" loop playsinline preload="none">
    <source src="thousandyears.mp3" type="audio/mpeg">
</audio>

<div id="musicBtn">
    <svg id="playIcon" viewBox="0 0 24 24" width="30" height="30" fill="#d4af37">
        <path d="M8 5v14l11-7z"/>
    </svg>
    <svg id="pauseIcon" viewBox="0 0 24 24" width="26" height="26" fill="#d4af37" style="display:none;">
        <path d="M6 4h4v16H6zM14 4h4v16h-4z"/>
    </svg>
</div>

<script>
// Scroll fade in (aman)
const observer = new IntersectionObserver(e => e.forEach(en => en.isIntersecting && en.target.classList.add('show')), {threshold: 0.1});
document.querySelectorAll('.fade').forEach(el => observer.observe(el));

// MUSIK ‚Äî SUDAH DIPERBAIKI TOTAL
const audio = document.getElementById('bgm');
audio.volume = 0.3;

document.getElementById('musicBtn').onclick = () => {
    if (audio.paused) {
        audio.play().catch(e => console.log("Play ditolak browser")); // buat iOS/Safari
        document.getElementById('playIcon').style.display = 'none';
        document.getElementById('pauseIcon').style.display = 'block';
    } else {
        audio.pause();
        document.getElementById('playIcon').style.display = 'block';
        document.getElementById('pauseIcon').style.display = 'none';
    }
};

// DRAG & MOVE MUSIC BUTTON ‚Äî Interaktif
const btn = document.getElementById("musicBtn");

let isDragging = false;
let offsetX = 0;
let offsetY = 0;

btn.addEventListener("mousedown", startDrag);
btn.addEventListener("touchstart", startDrag);

function startDrag(e) {
    isDragging = true;
    btn.style.cursor = "grabbing";

    const rect = btn.getBoundingClientRect();
    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;

    offsetX = clientX - rect.left;
    offsetY = clientY - rect.top;

    document.addEventListener("mousemove", onDrag);
    document.addEventListener("touchmove", onDrag);
    document.addEventListener("mouseup", stopDrag);
    document.addEventListener("touchend", stopDrag);
}

function onDrag(e) {
    if (!isDragging) return;

    const clientX = e.touches ? e.touches[0].clientX : e.clientX;
    const clientY = e.touches ? e.touches[0].clientY : e.clientY;

    btn.style.left = (clientX - offsetX) + "px";
    btn.style.top = (clientY - offsetY) + "px";
}

function stopDrag() {
    isDragging = false;
    btn.style.cursor = "grab";

    document.removeEventListener("mousemove", onDrag);
    document.removeEventListener("touchmove", onDrag);
    document.removeEventListener("mouseup", stopDrag);
    document.removeEventListener("touchend", stopDrag);
}




// Copy rekening dinamis
function copyRek(norekId) {
    const elem = document.getElementById(norekId); // Ambil nomor rekening
    navigator.clipboard.writeText(elem.innerText).then(() => {
        // Ambil ID notif sesuai nomor rekening
        const notif = document.getElementById('notif' + norekId.slice(-1));
        notif.style.display = "block"; // Tampilkan notif
        setTimeout(() => notif.style.display = "none", 1500); // Sembunyikan lagi
    });
}



// Slider manual
let startX = 0;
const slides = document.querySelector('.slides');
slides.addEventListener('touchstart', e => startX = e.touches[0].clientX);
slides.addEventListener('touchmove', e => e.preventDefault());
</script>







<!-- MASUKIN DI ATAS </body> (cukup sekali) -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app-compat.js";
  import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore-compat.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-storage-compat.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCBNM5NpBwHOwyla5LcBZId7SCUIBgthnw",
    authDomain: "ertiawed.firebaseapp.com",
    projectId: "ertiawed",
    storageBucket: "ertiawed.firebasestorage.app",
    messagingSenderId: "580476029012",
    appId: "1:580476029012:web:266389781d60b1bad4c5c1"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);
  const ucapanRef = collection(db, "ucapan");
  let isSending = false;

  // === Render ucapan ===
  function render(data, isLocal = false) {
    const { nama, doa, fotoURL, waktu } = data;
    const div = document.createElement("div");
    div.className = "ucapan-item";
    if (isLocal) div.style.cssText = "border:2px solid #d4af37;border-radius:15px;";

    const t = waktu?.seconds ? new Date(waktu.seconds*1000).toLocaleString("id-ID", {dateStyle:"medium", timeStyle:"short"}) : waktu || "Baru saja";

    div.innerHTML = `
      ${fotoURL ? `<img src="${fotoURL}" loading="lazy" style="width:50px;height:50px;border-radius:50%;object-fit:cover;margin-right:12px;float:left;">` : ""}
      <div style="${fotoURL?"overflow:hidden;":""}">
        <strong style="color:#d4af37;">${nama}</strong>
        <small style="color:#ccc;display:block;margin:4px 0;">${t}</small>
        <p style="margin:6px 0;line-height:1.7;word-break:break-word;">${doa.replace(/\n/g,"<br>")}</p>
      </div>
      <div style="clear:both;"></div>
    `;
    return div;
  }

  // === Kirim ucapan (anti-spam tetap utuh) ===
  async function kirim() {
    if (localStorage.getItem("sudahKirim")) { alert("Kamu sudah mengirim ucapan. Terima kasih ‚ù§Ô∏è"); return; }
    if (isSending) return;
    isSending = true;

    const btn = document.querySelector(".btn-kirim");
    btn.disabled = true; btn.innerText = "Mengirim...";

    const nama = document.getElementById("nama").value.trim();
    const doa = document.getElementById("doa").value.trim();
    const foto = document.getElementById("foto")?.files[0];

    if (!nama || !doa) { alert("Nama & ucapan wajib diisi ya üôè"); btn.disabled=false; btn.innerText="Kirim Ucapan"; isSending=false; return; }

    let fotoURL = "";
    try {
      if (foto) {
        const compressed = foto.size > 2*1024*1024 
          ? await (await import("https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js")).default(foto, {maxSizeMB:1.5, maxWidthOrHeight:800})
          : foto;
        const storageRef = ref(storage, `ucapan/${Date.now()}_${compressed.name}`);
        await uploadBytes(storageRef, compressed);
        fotoURL = await getDownloadURL(storageRef);
      }

      await addDoc(ucapanRef, { nama, doa, fotoURL, waktu: serverTimestamp() });
      localStorage.setItem("sudahKirim", JSON.stringify({nama, doa, fotoURL, waktu:new Date().toLocaleString("id-ID")}));

      document.getElementById("nama").value = "";
      document.getElementById("doa").value = "";
      document.getElementById("foto").value = "";

      alert("Terima kasih! Ucapanmu sudah terkirim üéâ");
      btn.innerText = "Terkirim ‚úì"; btn.style.opacity = "0.6";
    } catch(e) {
      console.error(e);
      alert("Gagal kirim, coba lagi ya üôè");
      btn.disabled = false; btn.innerText = "Kirim Ucapan";
    }
    isSending = false;
  }

  // === Load real-time ===
  const q = query(ucapanRef, orderBy("waktu","desc"));
  onSnapshot(q, snap => {
    const list = document.getElementById("listUcapan");
    list.innerHTML = snap.empty ? '<p style="text-align:center;color:#aaa;padding:30px 0;font-style:italic;">Belum ada ucapan nih...</p>' : "";
    snap.forEach(doc => list.appendChild(render(doc.data())));
  });

  // === DOM Ready ===
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelector(".btn-kirim").addEventListener("click", kirim);

    if (localStorage.getItem("sudahKirim")) {
      const u = JSON.parse(localStorage.getItem("sudahKirim"));
      document.querySelector(".btn-kirim").disabled = true;
      document.querySelector(".btn-kirim").innerText = "Terkirim ‚úì";
      document.querySelector(".btn-kirim").style.opacity = "0.6";
      document.getElementById("listUcapan").prepend(render(u, true));
    }
  });
</script>

</body>
</html>